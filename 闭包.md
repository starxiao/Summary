



# 闭包

## 一、概念
1. 作用域定义为一套规则，这套规则是用来管理引擎如何在当前作用域以及嵌套的子作用域中根据
标识名称进行变量查找。
2. 遍历嵌套作用域的规则：引擎从当前的执行作用域开始查找变量，
如果找不到，就会向上一级继续查找。当找到最外层的全局作用域时（window），无论找到与否，都会停止查找。
3. 词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的，因此当词法分析器处理代码的时候会保持作用域不变。
4. 函数作用域是将函数内部的变量和函数给“隐藏”起来，使得外部作用域无法访问到函数内部的任何内容。
5. 块级作用域在es6之前存在域with，try/catch中。在es6中块级作用域是指在if/for/while/else{}大括号里面的区域，
并且使用let 声明的变量才是块级作用域的变量，外部是访问不了的。
6. 声明提升就是变量和函数声明从代码中出现的位置被“移动”到了作用域的最上面。只有声明本身会被提升，而赋值等其他逻辑运算则会保留在原地。
函数声明提升会优于变量声明提升。
7. 闭包就是通过某种手段将内部函数传递到所在的词法作用域以外，它仍然会对原始定义作用域的引用。
8. javascript通过闭包的方式向外部暴露内部包装函数就是产生模块的一种方式。

## 二、代码
1. 现代模块机制

<code>

    let MyModules = (function () {
            let modules = {};
            function define(name,deps,impl) {
                for(let i=0; i<deps.length; i++){
                    deps[i] = modules[deps[i]];
                }
                modules[name] = impl.apply(impl,deps);
            }
            function get(name) {
                return modules[name];
            }
            return{
                define: define,
                get: get
            }
        })();
</code>

